<section class="tab {{tab.cssClass}}" data-tab="{{tab.id}}" data-group="{{tab.group}}">

  {{#if isGM}}
    <fieldset>
      <legend>{{localize "CALENDARIA.SettingsPanel.Section.Temperature"}}</legend>

      <div class="form-group">
        <label>{{localize "CALENDARIA.Settings.TemperatureUnit.Name"}}</label>
        <div class="form-fields">
          <select name="temperatureUnit">
            {{#each temperatureUnitOptions}}
              <option value="{{this.value}}" {{#if this.selected}}selected{{/if}}>{{this.label}}</option>
            {{/each}}
          </select>
        </div>
        <p class="hint">{{localize "CALENDARIA.Settings.TemperatureUnit.Hint"}}</p>
      </div>
    </fieldset>
  {{/if}}

  {{#if isGM}}
    <fieldset>
      <legend>{{localize "CALENDARIA.SettingsPanel.Section.Climate"}}</legend>

      {{#if hasZones}}
        <div class="form-group">
          <label>{{localize "CALENDARIA.SettingsPanel.Field.ClimateZone"}}</label>
          <div class="form-fields">
            <select name="climateZone">
              {{#each zoneOptions}}
                <option value="{{this.value}}" {{#if this.selected}}selected{{/if}}>{{this.label}}</option>
              {{/each}}
            </select>
          </div>
          <p class="hint">{{localize "CALENDARIA.SettingsPanel.Hint.ClimateZone"}}</p>
        </div>
      {{else}}
        <p class="hint section-hint">{{localize "CALENDARIA.SettingsPanel.Hint.NoZones"}}</p>
      {{/if}}

      <div class="button-row">
        <button type="button" data-action="openCalendarEditor">
          <i class="fas fa-cloud-sun"></i>
          {{localize "CALENDARIA.Settings.CalendarEditor.Label"}}
        </button>
      </div>
    </fieldset>
  {{/if}}

  {{#if isGM}}
    <fieldset>
      <legend>{{localize "CALENDARIA.SettingsPanel.Section.WeatherPresets"}}</legend>
      <p class="hint section-hint">{{localize "CALENDARIA.SettingsPanel.WeatherPresets.Hint"}}</p>

      <div class="weather-presets-grid">
        {{#if customWeatherPresets.length}}
          <div class="weather-presets-header">
            <span></span>
            <span></span>
            <span>{{localize "CALENDARIA.SettingsPanel.WeatherPresets.NamePlaceholder"}}</span>
            <span>{{localize "CALENDARIA.SettingsPanel.WeatherPresets.TempRange"}}</span>
            <span>{{localize "CALENDARIA.SettingsPanel.WeatherPresets.DarknessPenalty"}}</span>
            <span></span>
          </div>
        {{/if}}
        {{#each customWeatherPresets}}
          <div class="weather-preset-row" data-preset-id="{{this.id}}">
            <span class="preset-color-swatch" style="background-color: {{this.color}}"></span>
            <i class="fas {{this.icon}} preset-icon-display"></i>
            <span class="preset-label">{{this.label}}</span>
            <span class="preset-temp-display">{{this.tempMin}}° – {{this.tempMax}}°</span>
            <span class="preset-darkness-display">{{this.darknessPenalty}}</span>
            <span class="preset-actions">
              <button type="button" data-action="editWeatherPreset" data-preset-id="{{this.id}}" class="icon-button"
                data-tooltip="{{localize 'CALENDARIA.Common.Edit'}}">
                <i class="fas fa-edit"></i>
              </button>
              <button type="button" data-action="removeWeatherPreset" data-preset-id="{{this.id}}"
                class="icon-button danger" data-tooltip="{{localize 'CALENDARIA.Common.Delete'}}">
                <i class="fas fa-trash"></i>
              </button>
            </span>
          </div>
        {{else}}
          <p class="empty-message">{{localize "CALENDARIA.SettingsPanel.WeatherPresets.None"}}</p>
        {{/each}}
      </div>

      <button type="button" data-action="addWeatherPreset" class="add-button">
        <i class="fas fa-plus"></i>
        {{localize "CALENDARIA.SettingsPanel.WeatherPresets.Add"}}
      </button>
    </fieldset>
  {{/if}}

  {{#unless isGM}}
    <div class="info-box">
      <i class="fas fa-info-circle"></i>
      <p>{{localize "CALENDARIA.SettingsPanel.WeatherTab.PlayerMessage"}}</p>
    </div>
  {{/unless}}

</section>
