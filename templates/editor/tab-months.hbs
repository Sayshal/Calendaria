<section
    class="tab {{tab.cssClass}}"
    data-tab="{{tab.id}}"
    data-group="{{tab.group}}"
>
    <div class="items-list months-list">
        <div class="list-header flexrow">
            <span class="col-name"
                data-tooltip="{{localize 'CALENDARIA.Editor.Tooltip.MonthName'}}">{{localize "CALENDARIA.Common.Name"}}</span>
            <span class="col-abbr"
                data-tooltip="{{localize 'CALENDARIA.Editor.Tooltip.MonthAbbr'}}">{{localize "CALENDARIA.Common.Abbreviation"}}</span>
            <span class="col-days"
                data-tooltip="{{localize 'CALENDARIA.Editor.Tooltip.MonthDays'}}">{{localize "CALENDARIA.Common.Days"}}</span>
            <span class="col-leap"
                data-tooltip="{{localize 'CALENDARIA.Editor.Tooltip.MonthLeap'}}">{{localize "CALENDARIA.Editor.Column.Leap"}}</span>
            <span class="col-start-weekday"
                data-tooltip="{{localize 'CALENDARIA.Editor.Tooltip.StartingWeekday'}}">{{localize "CALENDARIA.Editor.Column.StartWeekday"}}</span>
            <span class="col-controls"></span>
        </div>

        {{#each monthsWithNav}}
        <div class="item month-item" data-index="{{this.index}}">
            <div class="month-row-main flexrow">
                <input
                    type="text"
                    name="months.{{this.index}}.name"
                    value="{{this.name}}"
                    class="col-name"
                >
                <input
                    type="text"
                    name="months.{{this.index}}.abbreviation"
                    value="{{this.abbreviation}}"
                    class="col-abbr"
                >
                <input
                    type="number"
                    name="months.{{this.index}}.days"
                    value="{{this.days}}"
                    min="1"
                    class="col-days"
                >
                <input
                    type="number"
                    name="months.{{this.index}}.leapDays"
                    value="{{this.leapDays}}"
                    min="0"
                    class="col-leap"
                >
                <select name="months.{{this.index}}.startingWeekday" class="col-start-weekday">
                    <option
                        value=""
                        {{#unless this.hasStartingWeekday}}selected{{/unless}}>
                        {{localize "CALENDARIA.Editor.StartingWeekday.Auto"}}
                    </option>
                    {{#each this.startingWeekdayOptions}}
                    <option
                        value="{{this.value}}"
                        {{#if this.selected}}selected{{/if}}>{{this.label}}</option>
                    {{/each}}
                </select>

                <div class="item-controls col-controls">
                    <button
                        type="button"
                        data-action="addMonth"
                        data-index="{{this.index}}"
                        data-tooltip="{{localize 'CALENDARIA.Editor.Tooltip.AddMonth'}}"
                    >
                        <i class="fas fa-plus"></i>
                    </button>
                    <button
                        type="button"
                        data-action="moveMonthUp"
                        data-index="{{this.index}}"
                        {{#if this.isFirst}}disabled{{/if}} data-tooltip="{{localize 'CALENDARIA.Editor.MoveUp'}}">
                        <i class="fas fa-chevron-up"></i>
                    </button>
                    <button
                        type="button"
                        data-action="moveMonthDown"
                        data-index="{{this.index}}"
                        {{#if this.isLast}}disabled{{/if}} data-tooltip="{{localize 'CALENDARIA.Editor.MoveDown'}}">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <button
                        type="button"
                        data-action="removeMonth"
                        data-index="{{this.index}}"
                        data-tooltip="{{localize 'CALENDARIA.Editor.Tooltip.RemoveMonth'}}"
                    >
                        <i class="fas fa-minus"></i>
                    </button>
                </div>
            </div>

            {{!-- Custom Weekdays Section --}}
            <details
                class="month-custom-weekdays"
                {{#if this.hasCustomWeekdays}}open{{/if}}>
                <summary>
                    <i class="fas fa-calendar-week"></i>
                    {{localize "CALENDARIA.Editor.Month.CustomWeekdays"}}
                    {{#if this.hasCustomWeekdays}}
                    <span class="weekday-count">({{this.customWeekdays.length}})</span>
                    {{/if}}
                </summary>
                <div class="custom-weekdays-content">
                    <label class="custom-weekdays-toggle">
                        <input
                            type="checkbox"
                            name="months.{{this.index}}.hasCustomWeekdays"
                            value="true"
                            {{#if this.hasCustomWeekdays}}checked{{/if}}>
                        {{localize "CALENDARIA.Editor.Month.EnableCustomWeekdays"}}
                    </label>
                    {{#if this.hasCustomWeekdays}}
                    <div class="custom-weekdays-list">
                        {{#each this.customWeekdays}}
                        <div class="custom-weekday-row flexrow">
                            <input
                                type="text"
                                name="months.{{../index}}.weekdays.{{@index}}.name"
                                value="{{this.name}}"
                                placeholder="{{localize 'CALENDARIA.Common.Name'}}"
                            >
                            <input
                                type="text"
                                name="months.{{../index}}.weekdays.{{@index}}.abbreviation"
                                value="{{this.abbreviation}}"
                                placeholder="{{localize 'CALENDARIA.Common.Abbreviation'}}"
                            >
                            <label class="rest-day-toggle">
                                <input
                                    type="checkbox"
                                    name="months.{{../index}}.weekdays.{{@index}}.isRestDay"
                                    value="true"
                                    {{#if this.isRestDay}}checked{{/if}}>
                                {{localize "CALENDARIA.Common.RestDay"}}
                            </label>
                        </div>
                        {{/each}}
                    </div>
                    {{/if}}
                </div>
            </details>
        </div>
        {{/each}}
    </div>
</section>
