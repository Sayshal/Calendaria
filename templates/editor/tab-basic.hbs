<section class="tab {{tab.cssClass}}" data-tab="{{tab.id}}" data-group="{{tab.group}}">
  <div class="template-selector">
    <div class="form-group">
      <label for="editor-calendar-select">{{localize "CALENDARIA.Common.Calendar"}}</label>
      <div class="form-fields">
        <select id="editor-calendar-select" name="calendarSelect">
          <option value="">{{localize "CALENDARIA.Editor.SelectCalendar"}}</option>
          {{#each templates}}
            <option value="{{this.id}}">{{this.name}}{{#if this.isCustom}}
                ({{localize "CALENDARIA.Editor.Custom"}}){{/if}}
            </option>
          {{/each}}
        </select>
      </div>
    </div>
    <div class="template-actions">
      <button type="button" data-action="duplicateCalendar">
        <i class="fas fa-copy"></i>
        {{localize "CALENDARIA.Editor.Duplicate"}}
      </button>
      <button type="button" data-action="createNew">
        <i class="fas fa-file-circle-plus"></i>
        {{localize "CALENDARIA.Editor.CreateNew"}}
      </button>
    </div>
  </div>

  <fieldset>
    <legend>{{localize "CALENDARIA.Editor.Section.CalendarIdentity"}}</legend>

    <div class="form-group">
      <label for="editor-name">{{localize "CALENDARIA.Common.Name"}}</label>
      <div class="form-fields">
        <input type="text" id="editor-name" name="name" value="{{calendar.name}}"
          placeholder="{{localize 'CALENDARIA.Editor.Placeholder.Name'}}" required>
      </div>
    </div>

    <div class="form-group">
      <label for="editor-system">{{localize "CALENDARIA.Editor.Field.System"}}</label>
      <div class="form-fields">
        <input type="text" id="editor-system" name="metadata.system" value="{{calendar.metadata.system}}"
          placeholder="{{localize 'CALENDARIA.Editor.Placeholder.System'}}">
      </div>
      <p class="hint">{{localize "CALENDARIA.Editor.Hint.System"}}</p>
    </div>

    <div class="form-group stacked">
      <label for="editor-description">{{localize "CALENDARIA.Common.Description"}}</label>
      <textarea id="editor-description" name="metadata.description" rows="2"
        placeholder="{{localize 'CALENDARIA.Editor.Placeholder.Description'}}">{{calendar.metadata.description}}</textarea>
    </div>
  </fieldset>

  <div class="flexrow" style="gap: 1rem;">
    <fieldset style="flex: 1;">
      <legend>{{localize "CALENDARIA.Editor.Section.YearSettings"}}</legend>

      <div class="form-group">
        <label for="editor-year-zero">{{localize "CALENDARIA.Editor.Field.YearZero"}}</label>
        <div class="form-fields fit-content">
          <input type="number" id="editor-year-zero" name="years.yearZero" value="{{calendar.years.yearZero}}" step="1"
            class="year-input">
        </div>
        <p class="hint">{{localize "CALENDARIA.Editor.Hint.YearZero"}}</p>
      </div>

      <div class="form-group">
        <label for="editor-first-weekday">{{localize "CALENDARIA.Editor.Field.YearZeroWeekday"}}</label>
        <div class="form-fields fit-content">
          <select id="editor-first-weekday" name="years.firstWeekday" class="fit-content">
            {{#each weekdayOptions}}
              <option value="{{this.value}}" {{#if this.selected}}selected{{/if}}>{{this.label}}</option>
            {{/each}}
          </select>
        </div>
        <p class="hint">{{localize "CALENDARIA.Editor.Hint.YearZeroWeekday"}}</p>
      </div>
    </fieldset>

    <fieldset style="flex: 1;">
      <legend>{{localize "CALENDARIA.Editor.Section.LeapYear"}}</legend>

      <div class="form-group">
        <label for="editor-leap-rule">{{localize "CALENDARIA.Editor.Field.LeapRule"}}</label>
        <div class="form-fields fit-content">
          <select id="editor-leap-rule" name="leapYearConfig.rule" class="leap-rule-select">
            {{#each leapRuleOptions}}
              <option value="{{this.value}}" {{#if this.selected}}selected{{/if}}>{{localize this.label}}</option>
            {{/each}}
          </select>
        </div>
        <p class="hint">{{localize "CALENDARIA.Editor.Hint.LeapRule"}}</p>
      </div>

      <div class="leap-simple-fields" {{#unless showLeapSimple}}style="display: none;" {{/unless}}>
        <div class="form-group">
          <label for="editor-leap-interval">{{localize "CALENDARIA.Editor.Field.LeapInterval"}}</label>
          <div class="form-fields fit-content">
            <input type="number" id="editor-leap-interval" name="leapYearConfig.interval" value="{{leapInterval}}"
              step="1" min="1" class="year-input">
          </div>
          <p class="hint">{{localize "CALENDARIA.Editor.Hint.LeapInterval"}}</p>
        </div>

        <div class="form-group">
          <label for="editor-leap-start-simple">{{localize "CALENDARIA.Editor.Field.LeapStart"}}</label>
          <div class="form-fields fit-content">
            <input type="number" id="editor-leap-start-simple" name="leapYearConfig.start" value="{{leapStart}}"
              step="1" class="year-input">
          </div>
          <p class="hint">{{localize "CALENDARIA.Editor.Hint.LeapStart"}}</p>
        </div>
      </div>

      <div class="leap-custom-fields" {{#unless showLeapCustom}}style="display: none;" {{/unless}}>
        <div class="form-group">
          <label for="editor-leap-pattern">{{localize "CALENDARIA.Editor.Field.LeapPattern"}}</label>
          <div class="form-fields fit-content">
            <input type="text" id="editor-leap-pattern" name="leapYearConfig.pattern" value="{{leapPattern}}"
              placeholder="400,!100,4" class="pattern-input">
          </div>
          <p class="hint">{{localize "CALENDARIA.Editor.Hint.LeapPattern"}}</p>
        </div>

        <div class="form-group">
          <label for="editor-leap-start-custom">{{localize "CALENDARIA.Editor.Field.LeapStart"}}</label>
          <div class="form-fields fit-content">
            <input type="number" id="editor-leap-start-custom" name="leapYearConfig.start" value="{{leapStart}}"
              step="1" class="year-input">
          </div>
          <p class="hint">{{localize "CALENDARIA.Editor.Hint.LeapStart"}}</p>
        </div>
      </div>

      <div class="leap-gregorian-info" {{#unless showLeapGregorian}}style="display: none;" {{/unless}}>
        <p class="hint gregorian-explanation">{{localize "CALENDARIA.Editor.Hint.LeapGregorian"}}</p>
      </div>
    </fieldset>
  </div>
</section>
