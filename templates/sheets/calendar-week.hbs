<div class="calendar-week-view">
  {{#if calendarData}}
    <div class="week-grid">
      <!-- Time labels column -->
      <div class="week-time-column">
        <div class="week-day-label-header">Time</div>
        {{#each calendarData.timeSlots}}
          <div class="week-time-label">{{label}}</div>
        {{/each}}
      </div>

      <!-- Day columns -->
      {{#each calendarData.days}}
        <div class="week-day-column {{#if isToday}}today{{/if}}">
          <!-- Day header -->
          <div class="week-day-header">
            <div class="day-name">{{dayName}}</div>
            <div class="day-date">{{monthName}} {{day}}</div>
          </div>

          <!-- Hour grid cells (background) -->
          {{#each ../calendarData.timeSlots}}
            <div class="week-time-cell {{#if (and ../isToday (eq hour ../currentHour))}}current-hour{{/if}}"
                 data-day="{{../day}}"
                 data-month="{{../month}}"
                 data-year="{{../year}}"
                 data-hour="{{hour}}"
                 data-action="selectTimeSlot">
            </div>
          {{/each}}

          <!-- Event blocks (overlay with grid positioning) -->
          {{#each eventBlocks}}
            <div class="week-event-block"
                 style="grid-row: {{startRow}} / {{endRow}}; background-color: {{color}};"
                 data-tooltip="{{name}}: {{startTime}}{{#if endTime}} - {{endTime}}{{/if}}"
                 data-action="editNote"
                 data-note-id="{{id}}">
              <div class="event-time">{{startTime}}</div>
              <div class="event-name">
                {{#if (eq iconType "fontawesome")}}
                  <i class="{{icon}}" style="margin-right: 4px;"></i>
                {{else if icon}}
                  <img src="{{icon}}" alt="{{name}}" style="width: 12px; height: 12px; margin-right: 4px;" />
                {{/if}}
                {{name}}
              </div>
            </div>
          {{/each}}
        </div>
      {{/each}}
    </div>
  {{else}}
    <div class="no-calendar">
      <p>No calendar configured. Select a calendar in the settings.</p>
    </div>
  {{/if}}
</div>
