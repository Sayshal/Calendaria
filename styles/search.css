/* ======================================== */
/* Search Functionality                    */
/* ======================================== */

.calendaria-search {
  display: none;
  z-index: 100000;
  position: fixed;
  flex-direction: column;
  width: 17.5rem;
  padding: 0.5rem;
  border: 0.0625rem solid var(--calendaria-border, rgb(58 58 94));
  border-radius: 0.5rem;
  background: var(--calendaria-bg, rgb(26 26 46));
  box-shadow: 0 0.25rem 1.25rem rgb(0 0 0 / 50%);

  &.visible {
    display: flex;
  }

  .search-panel-header {
    gap: 0.25rem;
    display: flex;
    position: relative;
    align-items: center;
  }

  .search-input {
    flex: 1;
    padding: 0.5rem 0.75rem;
    border: 0.0625rem solid var(--calendaria-border);
    border-radius: 0.375rem;
    color: var(--calendaria-text);
    font-size: var(--font-size-13, 0.8125rem);
    background: var(--calendaria-bg);
    box-shadow: 0 0.125rem 0.5rem var(--calendaria-shadow);

    &:focus {
      border-color: var(--calendaria-primary);
      outline: none;
      box-shadow: 0 0.125rem 0.75rem var(--calendaria-shadow);
    }

    &::-webkit-search-cancel-button {
      -webkit-appearance: none;
      appearance: none;
      opacity: 0.5;
      width: 0.875rem;
      height: 0.875rem;
      cursor: pointer;
      background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'%3E%3Cpath fill='%23888' d='M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3l105.4 105.3c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256l105.3-105.4z'/%3E%3C/svg%3E")
        center/contain no-repeat;
      transition: opacity 0.15s ease;

      &:hover {
        opacity: 1;
      }
    }
  }

  .search-panel-results {
    display: none;

    &.has-results {
      display: block;
      max-height: 15.625rem;
      margin-top: 0.25rem;
      padding: 0.5rem;
      border: 0.0625rem solid var(--calendaria-border);
      border-radius: 0.375rem;
      overflow-y: auto;
      background: var(--calendaria-bg);
      box-shadow: 0 0.25rem 1rem var(--calendaria-shadow);
    }
  }

  .search-result-item {
    gap: 0.5rem;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    padding: 0.3125rem 0.5rem;
    border-radius: 0.25rem;
    cursor: pointer;
    transition: background-color 0.15s ease;

    &:hover {
      background: var(--calendaria-bg-hover);
    }
  }

  .result-content {
    gap: 0.0625rem;
    display: flex;
    flex: 1;
    flex-direction: column;
    min-width: 0;
  }

  .result-name {
    color: var(--calendaria-text);
    font-weight: 500;
    font-size: var(--font-size-14, 0.875rem);
  }

  .result-description {
    overflow: hidden;
    color: var(--calendaria-text-dim);
    font-size: var(--font-size-10, 0.625rem);
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .result-icons {
    gap: 0.125rem;
    grid-template-columns: repeat(3, 1fr);
    display: grid;
    flex-shrink: 0;
    max-width: 3.375rem;

    i {
      display: flex;
      opacity: 0.85;
      justify-content: center;
      align-items: center;
      width: 1rem;
      height: 1rem;
      font-size: 0.625rem;
      transition: opacity 0.15s ease;

      &:hover {
        opacity: 1;
      }
    }
  }

  .result-note-icon {
    font-size: 0.6875rem;
  }

  .no-results {
    gap: 0.5rem;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0.75rem;
    color: var(--calendaria-text-dim);
    font-size: var(--font-size-11, 0.6875rem);
  }
}
