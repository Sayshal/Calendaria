.calendaria {
  &.time-dial {
    --dial-sun-size: 0.9375rem;
    --sky-bottom-color: rgb(161 176 209);
    --sky-top-color: rgb(0 115 188);

    z-index: 10000;
    position: fixed;
    pointer-events: none;

    .backdrop {
      inset: 0;
      z-index: -1;
      position: fixed;
      pointer-events: all;
      background: rgb(0 0 0 / 50%);
    }

    .container {
      position: relative;
      width: 18.75rem;
      height: 18.75rem;
      pointer-events: all;
    }

    .sky {
      isolation: isolate;
      position: relative;
      width: 100%;
      height: 100%;
      border: 0.1875rem solid rgb(201 170 113);
      border-radius: 50%;
      overflow: hidden;
      box-shadow:
        0 0 2.5rem rgb(0 0 0 / 90%),
        0 0 1.25rem rgb(201 170 113 / 40%);

      &::after {
        inset: 0;
        opacity: calc(0.75 + sin((var(--calendar-day-progress, 0) * pi)));
        z-index: -1;
        position: absolute;
        content: '';
        background: linear-gradient(to bottom, var(--sky-top-color), var(--sky-bottom-color));
      }
    }

    .stars {
      rotate: calc(var(--calendar-night-progress, 0) * -0.5turn);
      z-index: -2;
      position: absolute;
      top: -0.9375rem;
      left: -0.9375rem;
      width: 18.75rem;
      height: 18.75rem;
      border-radius: 50%;

      &::before {
        inset: -1.875rem;
        position: absolute;
        border-radius: 50%;
        content: '';
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 256 256'%3E%3Cfilter id='filter'%3E%3CfeTurbulence baseFrequency='0.3'/%3E%3CfeColorMatrix values='0 0 0 9 -4 0 0 0 9 -4 0 0 0 9 -4 0 0 0 0 1'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23filter)'/%3E%3C/svg%3E%0A");
      }
    }

    .sun {
      position: absolute;
      top: -0.9375rem;
      left: -0.9375rem;
      width: 18.75rem;
      height: 18.75rem;
      border-radius: 50%;

      &::before {
        opacity: var(--sun-opacity, 0);
        position: absolute;
        left: 50%;
        width: 100%;
        height: 100%;
        content: '';
        background:
          radial-gradient(1.875rem 0.9375rem, rgb(252 249 214 / 70%), transparent), radial-gradient(2.8125rem 1.875rem, rgb(248 243 161 / 50%), transparent),
          radial-gradient(3.25rem 2.375rem, rgb(250 188 90 / 30%), transparent), radial-gradient(3.75rem 2.8125rem, rgb(234 158 111 / 20%), transparent);
      }

      &::after {
        opacity: var(--sun-opacity, 0);
        position: absolute;
        right: 20%;
        bottom: calc(var(--dial-sun-size) * -0.5 + 50%);
        width: var(--dial-sun-size);
        height: var(--dial-sun-size);
        border-radius: 50%;
        content: '';
        background: rgb(255 255 0);
        box-shadow: 0 0 0.625rem rgb(255 255 0 / 80%);
      }
    }

    .moon-orb {
      opacity: var(--moon-opacity, 0);
      position: absolute;
      bottom: calc(var(--dial-sun-size) * -0.5 + 50%);
      left: 20%;
      width: var(--dial-sun-size);
      height: var(--dial-sun-size);
      border-radius: 50%;
      background: rgb(230 230 240);
      box-shadow:
        0 0 0.9375rem rgb(200 200 220 / 90%),
        0 0 0.5rem rgb(255 255 255 / 60%);
    }

    .markers {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .handle-container {
      position: absolute;
      top: 0;
      left: 50%;
      width: 0;
      height: 50%;
      pointer-events: none;
      transform-origin: bottom center;
    }

    .handle {
      clip-path: polygon(50% 100%, 0% 0%, 50% 15%, 100% 0%);
      position: absolute;
      top: -0.625rem;
      left: -0.75rem;
      width: 1.5rem;
      height: 1.875rem;
      cursor: grab;
      pointer-events: all;
      background: rgb(255 100 0);
      box-shadow:
        0 0 0.625rem rgb(0 0 0 / 50%),
        0 0 0.3125rem rgb(255 100 0 / 50%);
      filter: drop-shadow(0 0 0.125rem rgb(255 255 255));

      &:hover {
        background: rgb(255 132 51);
        box-shadow:
          0 0 0.9375rem rgb(0 0 0 / 70%),
          0 0 0.5rem rgb(255 100 0 / 80%);
        transform: scale(1.1);
      }

      &:active {
        cursor: grabbing;
        transform: scale(1.05);
      }
    }

    .time-display {
      position: absolute;
      top: 50%;
      left: 50%;
      text-align: center;
      transform: translate(-50%, -50%);
    }

    .time {
      width: 6ch;
      padding: 0;
      border: none;
      outline: none;
      color: rgb(255 100 0);
      font-weight: bold;
      font-size: 2.25rem;
      line-height: 1;
      font-family: 'Modesto Condensed', 'Palatino Linotype', serif;
      text-align: center;
      text-shadow: 0 0 0.625rem rgb(255 100 0 / 80%);
      cursor: text;
      background: transparent;

      &:focus {
        text-shadow: 0 0 0.9375rem rgb(255 100 0);
      }
    }
  }
}
